<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1111px" height="804px" viewBox="-0.5 -0.5 1111 804" content="&lt;mxfile modified=&quot;2019-04-13T17:17:38.100Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:60.0) Gecko/20100101 Firefox/60.0&quot; etag=&quot;DI_2zPFaitVqi8_OZeMX&quot; version=&quot;10.6.1&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;Page-1&quot; id=&quot;5f0bae14-7c28-e335-631c-24af17079c00&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 430 290 L 455 290 L 455 310 L 473.63 310" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 478.88 310 L 471.88 313.5 L 473.63 310 L 471.88 306.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M -80 80 L 500 80 L 510 90 L 510 510 L -70 510 L -80 500 L -80 80 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" transform="rotate(90,215,295)" pointer-events="none"/><path d="M -70 510 L -70 90 L -80 80 M -70 90 L 510 90" fill="none" stroke="#d6b656" stroke-miterlimit="10" transform="rotate(90,215,295)" pointer-events="none"/><g transform="translate(4.5,15.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="63" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-decoration: underline;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Write Side</div></div></foreignObject><text x="32" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Verdana" text-decoration="underline">Write Side</text></switch></g><path d="M 600 80 L 1180 80 L 1190 90 L 1190 510 L 610 510 L 600 500 L 600 80 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" transform="rotate(90,895,295)" pointer-events="none"/><path d="M 610 510 L 610 90 L 600 80 M 610 90 L 1190 90" fill="none" stroke="#82b366" stroke-miterlimit="10" transform="rotate(90,895,295)" pointer-events="none"/><g transform="translate(684.5,15.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="61" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-decoration: underline;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Read Side</div></div></foreignObject><text x="31" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Verdana" text-decoration="underline">Read Side</text></switch></g><path d="M 630 302 L 630 305 L 673.63 305" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 678.88 305 L 671.88 308.5 L 673.63 305 L 671.88 301.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 450 230 L 650 230 L 660 240 L 660 380 L 460 380 L 450 370 L 450 230 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" transform="rotate(90,555,305)" pointer-events="none"/><path d="M 460 380 L 460 240 L 450 230 M 460 240 L 660 240" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" transform="rotate(90,555,305)" pointer-events="none"/><g transform="translate(494.5,215.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="110" height="84" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div align="left">Message Bus:<br /><br />Messaging system <br />that supplies<br /><b>events</b> to<br /><b>Event Handlers</b></div></div></div></foreignObject><text x="55" y="48" fill="#000000" text-anchor="middle" font-size="12px" font-family="Verdana">[Not supported by viewer]</text></switch></g><path d="M 205 690 L 205 666.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 205 661.12 L 208.5 668.12 L 205 666.37 L 201.5 668.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 165 690 L 245 690 L 245 740 L 205 770 L 165 740 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" transform="translate(0,730)scale(1,-1)translate(0,-730)" pointer-events="none"/><g transform="translate(177.5,738.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="27" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 56px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>Command</div><div><br /></div></div></div></foreignObject><text x="28" y="20" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 295 295 L 355 295 L 385 335 L 355 375 L 295 375 L 265 335 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(273.5,328.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="103" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 104px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Storage Repository</div></div></foreignObject><text x="52" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Storage Repository</text></switch></g><path d="M 135 305 L 195 305 L 225 345 L 195 385 L 135 385 L 105 345 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(137.5,338.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="55" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 56px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Aggregate</div></div></foreignObject><text x="28" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Aggregate</text></switch></g><path d="M 295 425 L 355 425 L 385 465 L 355 505 L 295 505 L 265 465 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(273.5,458.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="102" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 103px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Domain Repository</div></div></foreignObject><text x="51" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Domain Repository</text></switch></g><path d="M 280 31 C 280 16.33 365 16.33 365 31 L 365 99 C 365 113.67 280 113.67 280 99 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="none"/><path d="M 280 31 C 280 42 365 42 365 31 M 280 36.5 C 280 47.5 365 47.5 365 36.5 M 280 42 C 280 53 365 53 365 42" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(290.5,72.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="63" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 64px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Event Store</div></div></foreignObject><text x="32" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Event Store</text></switch></g><path d="M 145 590 L 265 590 L 265 633.75 L 205 660 L 145 633.75 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(176.5,618.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="57" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 58px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Dispatcher</div></div></foreignObject><text x="29" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Dispatcher</text></switch></g><path d="M 145 520 L 265 520 L 265 563.75 L 205 590 L 145 563.75 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" transform="translate(0,555)scale(1,-1)translate(0,-555)" pointer-events="none"/><g transform="translate(154.5,548.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="101" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Command Handler</div></div></foreignObject><text x="51" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Command Handler</text></switch></g><rect x="10" y="75" width="190" height="190" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(11.5,91.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="186" height="156" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 186px; white-space: normal; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div align="left"><span><span>Aggregate:<br /></span></span><br /><span><span><span><span>•</span></span> Captures the domain logic in aggregate actions<br /></span></span><span><span><span><span>•</span></span></span><span>Action is mapped to a specific <b>command</b></span><span><br /></span></span><span><span><span><span>•</span></span> Action validates the current state that the action can be performed</span><span><br /></span></span><span><span><span><span>•</span></span> Generates one or more <b>events</b> that will mutate the current state to a new state </span></span></div></div></div></foreignObject><text x="93" y="84" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 265 555 L 325 555 L 325 511.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 325 506.12 L 328.5 513.12 L 325 511.37 L 321.5 513.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="468" y="620" width="192" height="183" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(470.5,654.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="188" height="113" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 188px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span><span>Command Handler:</span><span><br /><br />• calls <b>Domain Repository</b> to load an Aggregate</span><span><br /></span></span><span><span><span><span>•</span></span> calls <b>Aggregate</b> action mapped to the command</span><span><br /></span></span><span><span><span><span>•</span></span> calls <b>Domain Repository</b> to flush events emitted by the <b>Aggregate</b></span></span></div></div></foreignObject><text x="94" y="63" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 790 305 L 844.38 305" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 851.38 305 L 844.38 307.33 L 844.38 302.67 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 675 250 L 795 250 L 795 318.75 L 735 360 L 675 318.75 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" transform="translate(735,0)scale(-1,1)translate(-735,0)rotate(-270,735,305)" pointer-events="none"/><g transform="translate(696.5,298.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="76" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 77px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Event Handler</div></div></foreignObject><text x="38" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Event Handler</text></switch></g><path d="M 564 620 L 553 620 L 553 610 L 380 610 L 380 573 L 265 573" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 117 329 L 105 265" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><rect x="275" y="620" width="180" height="180" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(277.5,667.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="176" height="84" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 176px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span><span>Dispatcher:<br /></span></span><span><span><span><span>•</span></span> An abstraction layer to route a command to <b>CommandHandler</b> for processing.</span><span><br /></span></span><span><span><span><span>•</span></span> There can be only one handler per message type</span></span></div></div></foreignObject><text x="88" y="48" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 276 687 L 243 687 L 243 645 L 241 645" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 467.5 495.46 L 373 481" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><rect x="467.5" y="415" width="190" height="190" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(470.5,417.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="186" height="185" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 186px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span><span>Domain Repository:</span><span><br />• Loads all past <b>events</b> associated with an aggregate id from the <b>Events Store<br />• </b></span><span>Creates an <b>Aggregate</b> instance and hydrates it to the current state by replaying past <b>events</b></span><span><br />• Fetches emitted events from the <b>Aggregate</b> and sends them to the <b>Event Store</b> through <b>Storage Repository </b>whilst emitting <b>events</b> to the <b>Message Bus</b> in the same transaction context</span></span></div></div></foreignObject><text x="93" y="99" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="770" y="25" width="190" height="190" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(772.5,48.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="186" height="142" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 186px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span><span>Event Handler</span><span>:<br /></span></span><span><span><span><span>•</span></span> Subscribed to specific <b>events</b></span><span><br /></span></span><span><span><span><span>•</span></span> Processes <b>events</b> and updates <b>DTO Storage</b></span><span> with the outcomes<br /></span></span><span><span><span><span>•</span></span> One <b>event</b> type can have one or more <b>Event Handlers</b><br /></span></span><span><span><span><span>•</span></span> Separate <b>Event Handlers</b> can be used to update separate projection views associated with the same <b>event</b></span></span></div></div></foreignObject><text x="93" y="77" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 770 120 L 708 120 L 708 245" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 852.5 271 C 852.5 256.33 937.5 256.33 937.5 271 L 937.5 339 C 937.5 353.67 852.5 353.67 852.5 339 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="none"/><path d="M 852.5 271 C 852.5 282 937.5 282 937.5 271 M 852.5 276.5 C 852.5 287.5 937.5 287.5 937.5 276.5 M 852.5 282 C 852.5 293 937.5 293 937.5 282" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(859.5,312.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="70" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 71px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">DTO Storage</div></div></foreignObject><text x="35" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">DTO Storage</text></switch></g><path d="M 895 590 L 895 590" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 895 590 L 895 590 L 895 590 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 835 520 L 955 520 L 955 563.75 L 895 590 L 835 563.75 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" transform="translate(0,555)scale(1,-1)translate(0,-555)" pointer-events="none"/><g transform="translate(852.5,548.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="84" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 85px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Read Controller</div></div></foreignObject><text x="42" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Read Controller</text></switch></g><path d="M 835 590 L 955 590 L 955 633.75 L 895 660 L 835 633.75 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(882.5,618.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="25" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 26px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">DTO</div></div></foreignObject><text x="13" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">DTO</text></switch></g><rect x="700" y="397.5" width="125" height="125" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(702.5,417.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="121" height="84" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 121px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">DTO (data transfer object):<br /><span><span>•</span></span> An object that aggregates several data transfer calls into one.</div></div></foreignObject><text x="61" y="48" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 835 608 L 835 610 L 775 610 L 775 525" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><rect x="290" y="140" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(292.5,149.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="116" height="41" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 116px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Event Store:<br /><span><span>•</span></span> Repository of past <b>events</b></div></div></foreignObject><text x="58" y="27" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="455" y="0" width="150" height="150" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(457.5,32.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="146" height="84" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 146px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span><span>Storage Repository:</span><span><br /><br /></span></span><span><span><span><span>•</span></span> Abstraction layer of the storage access</span><span><br /></span></span><span><span><span><span>•</span></span></span><span> Writes and reads to <b>Event Store</b><br /></span></span></div></div></foreignObject><text x="73" y="48" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="955" y="365" width="130" height="130" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(957.5,394.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="126" height="70" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 126px; white-space: normal; overflow-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span><span>Read Controller:</span><span><br /><br /></span></span><span><span><span><span>•</span></span> Returns a valid protobuf <b>DTO</b> object back to the consumer</span><span><br /></span></span></div></div></foreignObject><text x="63" y="41" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 325 288.63 L 325 230 L 280 230 L 280 130 L 322 130 L 316.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 325 293.88 L 321.5 286.88 L 325 288.63 L 328.5 286.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 321.88 110 L 314.88 113.5 L 316.63 110 L 314.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 344 109 L 350 140" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 493 150 L 357.86 298.81" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 895 350 L 895 513.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 895 518.88 L 891.5 511.88 L 895 513.63 L 898.5 511.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 230 385 L 260 385 L 275 405 L 260 425 L 230 425 L 215 405 Z" fill="#e1d5e7" stroke="#9673a6" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(226.5,398.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="37" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 38px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Events</div></div></foreignObject><text x="19" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Events</text></switch></g><path d="M 190 460 L 220 460 L 235 480 L 220 500 L 190 500 L 175 480 Z" fill="#e1d5e7" stroke="#9673a6" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(186.5,473.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="37" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 38px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Events</div></div></foreignObject><text x="19" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Events</text></switch></g><path d="M 205 520 L 205 506.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 205 501.12 L 208.5 508.12 L 205 506.37 L 201.5 508.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 205 460 L 205 440 L 165 440 L 165 391.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 165 386.12 L 168.5 393.12 L 165 391.37 L 161.5 393.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 220.88 386.22 L 208.75 377.28" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 225.1 389.34 L 217.39 388 L 220.88 386.22 L 221.55 382.36 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 204.53 374.16 L 212.24 375.5 L 208.75 377.28 L 208.08 381.13 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 283.69 429.49 L 272.83 420.15" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 287.67 432.91 L 280.08 431 L 283.69 429.49 L 284.65 425.69 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 268.85 416.73 L 276.44 418.64 L 272.83 420.15 L 271.87 423.95 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 955 555 L 1020 555 L 1020 495" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 325 418.63 L 325 381.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 325 423.88 L 321.5 416.88 L 325 418.63 L 328.5 416.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 325 376.12 L 328.5 383.12 L 325 381.37 L 321.5 383.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 325 400 L 400 400 L 400 290 L 423.63 290" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 428.88 290 L 421.88 293.5 L 423.63 290 L 421.88 286.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/></g></svg>